<template>
    <div>
        <div class="container bg-light p-3">
            <div class="form-row">

                <div class="col-lg-2 col-sm-12 col-md-6">
                    <div class="form-group">
                        <label for="auftrags_id">Auftragsnummer</label>
                        <multiselect
                            class=""
                            id="auftrags_id"
                            v-model="valueOrder"
                            :options="orders"
                            placeholder="Auftrag"
                            selectLabel=""
                            :custom-label="formatOrder"
                        ></multiselect>
                    </div>
                </div>

                <div class="col-lg-3 col-sm-12 col-md-6">
                    <div class="form-group">
                        <label for="bauherr">Bauherr</label>
                        <input type="text" class="form-control" id="bauherr" disabled>
                    </div>
                </div>


                <div class="col-lg-3 col-sm-12 col-md-6">
                    <div class="form-group">
                        <label for="bezeichnung">Bezeichnung</label>
                        <input type="text" class="form-control" id="bezeichnung" disabled>
                    </div>
                </div>

                <div class="col-lg-3 col-sm-12 col-md-6">
                    <div class="form-group">
                        <label for="tätigkeit">Tätigkeit</label>
                        <multiselect
                            class=""
                            id="tätigkeit"
                            v-model="valueActivity"
                            :options="activities"
                            :custom-label="formatActivity"
                            placeholder="Tätigkeit Auswählen"
                            selectLabel=""

                        ></multiselect>
                    </div>
                </div>


                <div class="col-lg-1 col-sm-12 col-md-6">
                    <div class="form-group">
                        <label for="kilometer">Kilometer</label>
                        <input type="number" class="form-control" id="kilometer" v-model="day_UF.km">
                    </div>
                </div>
            </div>

            <div class="form-row">
                <div class="col col-lg-8 col-md-6">
                    <div class="form-group">
                        <label for="bemerkung">Bemerkung</label>
                        <input type="text" class="form-control" id="bemerkung" v-model="day_UF.comment">
                    </div>
                </div>
                <div class="col-lg-1 col-sm-12 col-md-6">
                    <div class="form-group">
                        <label for="stundenanzahl">Stundenanzahl</label>
                        <input type="text" class="form-control" id="stundenanzahl" v-model="day_UF.hours">
                    </div>
                </div>

                <div class="col-lg-3 col-sm-12 col-md-12">

                    <div class="form-group">
                        <label for="stundenanzahl">&nbsp;</label>
                        <button class="btn btn-light form-control text-danger" @click="$emit('activityDelete', day_UF.id)">
                            <i class="fas fa-trash-alt"></i>
                            Tätigkeit löschen
                        </button>
                    </div>
                </div>

            </div>
        </div>
    </div>
</template>

<script>
    import {Multiselect} from "vue-multiselect";


    export default {
        components: {Multiselect},
/*        props: {
            activity: {
                type: Object
            }
        },*/
        data() {
            return {
                valueActivity: null,
                valueOrder: null,
                orders: [],
                activities: [],
                day_UF: {
                    id: '',
                    day_id: '',
                    order_id: '',
                    activity_id: '',
                    hours: '',
                    km: '',
                    remark: '',
                    builder: ''
                }
            }
        },
        methods:{
            formatActivity: function(activity) {
                return activity.activity;
            },
            formatOrder: function(order){
                return order.order;
            },
            saveActivity: function () {

            },
            updateActivity: function () {

            },
            deleteActivity: function () {

            },
            loadActivity: function () {

            }
        },
        mounted() {
            axios.get('/api/v1/activities').then(response => {
                this.activities = response.data.map(function(activity) {
                    return {activity: activity.Tätigkeit, id: activity.T_kurz}
                })
            });
            axios.get('/api/v1/orders').then(response => {
                this.orders = response.data.map(function(order){
                    return {order: order.Auftrags_Nr, id: order.Auftrags_ID}
                })
            });
            this.bus.$on('saveDayUF', () => {
                console.log('DAY_UF Wird gespeichert')
            });
        }
    }
</script>
